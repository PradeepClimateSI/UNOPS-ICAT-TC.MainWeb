<p-toast position="top-right"></p-toast>
<div class="container pl-20 pr-20">
    <div class="p-grid p-fluid card" id="content" #content>
        <h4 class="mt-4">Non - Conformance Report</h4>
        <!-- <div> {{climateactions|json}} </div> -->
        <div *ngIf="roundOneHeadTable != null">
            <div class="row p-2" style="border:1px solid black;">
                <div class="masterRoundOne" style="border:1px solid black;">
                    <div class="row p-2">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Verification Round</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>Pre-Assessment</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Date Generated</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{this.roundOneHeadTable?.createdOn | date: "yyyy-MM-dd "}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Verifier</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{this.roundOneVerifier?.username}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Institution</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{this.roundOneVerifier?.institution.name}}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <br>
                </div>

                <ng-container *ngIf="roundOneList.length >0; else elseBlockroun1">
                    <div class="roundOnendc">
                        <div class="row mb-3"
                            style="background-clip: border-box; background: rgb(160, 193, 204); padding: 5px;">
                            <div class="col-md-4">
                                <h6>Non Conformance Round 1</h6>
                            </div>
                            <div class="col-md-3">
                                <h6>Area : Aggregated Actions/Action Areas </h6>
                            </div>
                            <div class="col-md-3">
                                <!-- <h6>Date : {{roundOnendcList[0]?.editedOn | date: "yyyy-MM-dd "}} </h6> -->
                            </div>
                            <div class="col-md-2">
                                <button pButton pRipple type="button" label="Edit" class="p-button-info"
                                    (click)="toDetailPage()"></button>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Explanation</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundOneList[0].explanation}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Root Cause</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundOneList[0].rootCause}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Corrective Action</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundOneList[0].correctiveAction}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Action</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundOneList[0].action}}</p>
                            </div>
                        </div>
                    </div>

                </ng-container>
                <ng-template #elseBlockroun1>
                    <p>NO NON CONFORMAMNCE IN ROUND ONE</p>
                </ng-template>
            </div>
        </div>
        <div>
            <br>
            <br>
        </div>




        <div *ngIf="roundTwoHeadTable != null">
            <div class="row p-2" style="border:1px solid black;">
                <div class="masterRoundTwo" style="border:1px solid black;">
                    <div class="row p-2">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Verification Round</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>Initial-Assessment</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Generated Date</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{this.roundTwoHeadTable?.createdOn | date: "yyyy-MM-dd "}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Verifier</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{this.roundTwoVerifier?.username}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Institution</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{this.roundTwoVerifier?.institution.name}}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <br>
                </div>

                <ng-container *ngIf="roundTwoList?.length != 0; else elseBlockroun2">
                    <div class="roundTwondc" *ngIf="roundTwondcList?.length != 0">
                        <div class="row mb-3"
                            style="background-clip: border-box; background: rgb(160, 193, 204); padding: 5px;">
                            <div class="col-md-4">
                                <h6>Non Conformance Round 2</h6>
                            </div>
                            <div class="col-md-3">
                                <h6>Area : Aggregated Actions/Action Areas </h6>
                            </div>
                            <div class="col-md-3">
                                <!-- <h6>Date : {{roundTwondcList[0]?.editedOn | date: "yyyy-MM-dd "}} </h6> -->
                            </div>
                            <div class="col-md-2">
                                <button pButton pRipple type="button" label="Edit" (click)="toDetailPage()"
                                    class="p-button-info"></button>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Explanation</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundTwoList[0].explanation}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Root Cause</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundTwoList[0].rootCause}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Corrective Action</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundTwoList[0].correctiveAction}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Action</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundTwoList[0].action}}</p>
                            </div>
                        </div>
                    </div>


                </ng-container>
                <ng-template #elseBlockroun2>
                    <p>NO NON CONFORMAMNCE IN ROUND TWO</p>
                </ng-template>
            </div>
        </div>
        <div>
            <br>
            <br>
        </div>

        <div *ngIf="roundThreeHeadTable != null">
            <div class="row p-2" style="border:1px solid black;">
                <div class="masterRoundThree" style="border:1px solid black;">
                    <div class="row p-2">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Verification Round</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>Post-Assessment</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Date Generated</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{this.roundThreeHeadTable?.createdOn | date: "yyyy-MM-dd "}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Verifier</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{this.roundThreeVerifier?.username}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Institution</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{this.roundThreeVerifier?.institution.name}}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <br>
                </div>

                <ng-container *ngIf="roundThreeList?.length != 0; else elseBlockroun3">
                    <div class="roundThreendc" *ngIf="roundThreendcList?.length != 0">
                        <div class="row mb-3"
                            style="background-clip: border-box; background: rgb(160, 193, 204); padding: 5px;">
                            <div class="col-md-4">
                                <h6>Non Conformance Round 3</h6>
                            </div>
                            <div class="col-md-3">
                                <h6>Area : Aggregated Actions/Action Areas </h6>
                            </div>
                            <div class="col-md-3">
                                <!-- <h6>Date : {{roundThreendcList[0]?.editedOn | date: "yyyy-MM-dd "}} </h6> -->
                            </div>
                            <div class="col-md-2">
                                <button pButton pRipple type="button" label="Edit" (click)="toDetailPage()"
                                    class="p-button-info"></button>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Explanation</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundThreeList[0].explanation}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Root Cause</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundThreeList[0].rootCause}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Corrective Action</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundThreeList[0].correctiveAction}}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><b>Action</b></p>
                            </div>
                            <div class="col-md-6">
                                <p>{{roundThreeList[0].action}}</p>
                            </div>
                        </div>
                    </div>
                </ng-container>
                <ng-template #elseBlockroun3>
                    <p>NO NON CONFORMANCE IN ROUND THREE</p>
                </ng-template>
            </div>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-md-6">
        </div>
        <div class="col-md-2">
            <button *ngIf="isVerificationHistory !=1 && vStatus != 3" [disabled]="assessment.verificationStatus == 7"
                pButton pRipple type="button" (click)="toChangeStatus()" class="p-button-info">
                {{assessment.verificationStatus == 7 ? "Submited" : "Submit" }}
            </button>
            <!-- <button *ngIf="vStatus != 3 || assementYear.verificationStatus == 7"
             pButton pRipple type="button" label="Submited" [disabled]="true" class="p-button-info"></button> -->
        </div>
        <div class="col-md-2">
            <button pButton pRipple type="button" label="Download" (click)="toDownload()"
                class="p-button-info"></button>
        </div>
        <div class="col-md-2">
            <button pButton pRipple type="button" label="Back" (click)="back()"
                class="p-button-info"></button>
        </div>
    </div>
</div>
